---
    - hosts: localhost
      connection: local 
      become: yes
      become_user: root
      user: ubuntu
      tasks:
        - name: Ensure Ansible runs on start
          cron:
            name: "Excute ansible on start"
            special_time: reboot
            job: "ansible-playbook /site.yaml"
    
    - hosts: localhost
      connection: local 
      become: yes
      become_user: root
      user: ubuntu
      vars:
        pip_install_packages:
          - name: docker
      roles:
        - geerlingguy.docker
        - geerlingguy.pip
    
    - hosts: localhost
      connection: local 
      become: yes
      become_user: root
      user: ubuntu
      tasks:
        - name: Clone ELK repo
          git:
            repo: 'https://github.com/deviantony/docker-elk.git'
            dest: /docker-elk

    - hosts: localhost
      connection: local 
      become: yes
      become_user: root
      user: ubuntu
      tasks:
        - name: Docker compose up
          shell: |
            cd /docker-elk
            docker-compose up -d
